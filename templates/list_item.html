<!DOCTYPE html ng-app="app">
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Items List</title>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" />
    <link href="/assets/css/style.css" rel="stylesheet"/>
</head>
<body>

<div class="container" ng-controller="ListItemsCtrl as ctrl">
    {{ items | angular }}
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.11/angular.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

<script type="text/javascript">
    var assets = (function() {

        var self = {};

        var elem = document.createElement("div");

        self.allHeaders = [
            {% for header in headers %}
                (function(field) { elem.innerHTML = field; return elem.innerText })("{{ header }}"),
            {% endfor %}
        ];
        self.items = [
            {% for item in items %}
                (function(field) { elem.innerHTML = field; return elem.innerText })("{{ item }}"),
            {% endfor %}
        ];

        self.loadData = function(http) {
            var $http = http;

            return function(resource) {
                return $.http.get(resource);
            };
        };

        return self;
    })();

    (function(app) {

        function ListItemsCtrl($scope, $http, $q) {

            $scope.data = assets.preloaded;
            $scope.allHeaders = assets.allHeaders;
            $scope.loadData = assets.loadData($http);
        }

        ListItemsCtrl.$inject = ['$scope','$http','$q'];

        app.controller('ListItemsCtrl', ListItemsCtrl);

    })(angular.module('app', []));

</script>

<script src="/assets/js/list_item.js" type="text/javascript"></script>

</body>
</html>